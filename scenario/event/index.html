<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Emitter</title>
	<script src="../../sky.js" type="text/javascript"></script>
	<script src="event.js" type="text/javascript"></script>
</head>
<body>
<input value="响应事件" onclick="btnClickHandle()" type="button"/>
<script>
	function Cat(){//构造函数
		EventEmitter.apply(this);//super
		this.say=function(){
			if(this.emit('say')){//触发发生前的事件,根据返回值判断是否取消
				alert("喵");
			}
		};
	}
	Cat.prototype=Object.create(EventEmitter.prototype);//继承Emitter
	Cat.prototype.constructor=Cat;
	function btnClickHandle(){
		var cat=new Cat();
		cat.on('say',function(){
			alert(1);
			//return false; //如果返回false 就不会执行了
		});
		cat.say();
	}
</script>
</body>
</html>